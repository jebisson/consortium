---
import SiteLayout from "../layouts/SiteLayout.astro";
import "../styles/global.css";
import logo from "../assets/consortium.png";
import { theme } from "../config/theme.js";

// Safe theme destructuring (no undefined crash)
const colors = theme?.colors ?? {};
const background = colors.background ?? "rgb(18,18,18)";
const text = colors.text ?? "#FFFFFF";
const accent = colors.accent ?? "#D4A017";
const border = colors.border ?? "rgba(255,255,255,0.10)";
const bandBackground = colors.bandBackground ?? "rgb(245,245,245)";

// Content (edit as you want)
const offers = [
  {
    title: "Intégration des nouveaux employés",
    desc:
      "Accueil TI, configuration de poste, accès Microsoft 365, bonnes pratiques et première semaine sans friction.",
    bullets: [
      "Checklist d’arrivée (comptes, licences, accès, groupes)",
      "Configuration M365 (Outlook/Teams/OneDrive) et appareil",
      "Démo des outils internes (SharePoint/Teams, procédures)",
      "Validation finale + mini guide remis à l’employé",
    ],
  },
  {
    title: "Formations Microsoft 365",
    desc: "Ateliers courts et concrets adaptés à votre réalité (présentiel ou Teams).",
    bullets: [
      "Teams : canaux, réunions, partage, bonnes pratiques",
      "SharePoint/OneDrive : structure, droits, partage externe",
      "Outlook : courriels, calendrier, délégation, règles",
      "Hygiène numérique : phishing, MFA, mots de passe",
    ],
  },
  {
    title: "Formation cybersécurité (pratique)",
    desc: "Réduire les incidents et renforcer les réflexes : simple, clair, applicable.",
    bullets: [
      "Reconnaître les courriels frauduleux",
      "Gestion des mots de passe et MFA",
      "Partage sécuritaire de documents",
      "Que faire en cas de doute / incident",
    ],
  },
];

const formats = [
  { title: "Session express", desc: "30 à 60 minutes (ciblée sur un outil ou un besoin)" },
  { title: "Atelier équipe", desc: "60 à 90 minutes (avec questions et cas réels)" },
  { title: "Parcours onboarding", desc: "Séquence sur 1–2 semaines pour nouveaux employés" },
  { title: "Capsules / guides", desc: "Mini guides PDF + procédures adaptées à votre contexte" },
];
---

<SiteLayout title="Formations & intégration – Consortium">
  <div
    style={`--bg:${background}; --text:${text}; --accent:${accent}; --border:${border}; --band:${bandBackground};`}
  >
    <style>
      /* === Same “premium index” language === */

      /* Black card surface */
      .card {
        background: rgb(18,18,18);
        border: 1px solid rgba(0,0,0,0.16);
        box-shadow: 0 14px 40px rgba(0,0,0,0.18);
      }
      .card:hover { transform: translateY(-4px); }
      .card-anim { transition: transform 200ms ease, box-shadow 200ms ease, border-color 200ms ease; }

      .hover-tint {
        background: radial-gradient(
          circle at 18% 18%,
          color-mix(in srgb, var(--accent) 16%, transparent),
          transparent 62%
        );
      }

      .soft { color: color-mix(in srgb, white 82%, transparent); }
      .muted { color: color-mix(in srgb, white 70%, transparent); }

      /* Pills like index */
      .pill {
        background: rgba(18,18,18,0.92);
        border: 1px solid rgba(255,255,255,0.10);
        color: rgba(255,255,255,0.90);
      }

      /* Back button */
      .backbtn:hover {
        border-color: color-mix(in srgb, var(--accent) 65%, transparent);
        filter: brightness(1.06);
      }

      /* White band text */
      .band-h { color: rgba(17,17,17,0.92); }
      .band-p { color: rgba(17,17,17,0.74); }

      /* Better bullet contrast on dark cards */
      .bullet li { color: color-mix(in srgb, white 78%, transparent); }
      .bullet li::marker { color: color-mix(in srgb, var(--accent) 75%, transparent); }
    </style>

    <!-- HEADER SLOT -->
    <div slot="header" class="flex flex-col items-center">
      <img src={logo.src} alt="Consortium" class="h-32 md:h-36 w-auto" />
      <h1
        class="mt-2 text-sm tracking-[0.35em] uppercase"
        style="color: color-mix(in srgb, var(--text) 60%, transparent);"
      >
        Services TI
      </h1>
    </div>

    <!-- HERO SLOT (dark + subtle glow) -->
    <div slot="hero" class="relative mx-auto max-w-4xl px-4 text-center z-20 pt-2 pb-10">
      <div
        class="pointer-events-none absolute left-1/2 top-8 -translate-x-1/2 w-[70%] md:w-[55%] h-24 blur-[80px] opacity-70"
        style="background: color-mix(in srgb, var(--accent) 18%, transparent);"
      ></div>

      <p class="mt-2 text-xs uppercase tracking-[0.35em]" style="color: color-mix(in srgb, var(--text) 55%, transparent);">
        Formations & intégration
      </p>

      <h2 class="mt-4 text-4xl md:text-5xl font-semibold tracking-tight" style="color: var(--text);">
        Accueillir, former et rendre autonome rapidement
      </h2>

      <p class="mt-4 text-base md:text-lg leading-relaxed soft">
        On aide vos nouveaux employés à démarrer du bon pied et vos équipes à mieux utiliser Microsoft 365 —
        avec des formations courtes, claires et adaptées à votre réalité.
      </p>

      <div class="mt-6 flex flex-wrap items-center justify-center gap-2">
        <span class="pill inline-flex items-center rounded-full px-4 py-2 text-sm font-semibold">Nouveaux employés</span>
        <span class="pill inline-flex items-center rounded-full px-4 py-2 text-sm font-semibold">Microsoft 365</span>
        <span class="pill inline-flex items-center rounded-full px-4 py-2 text-sm font-semibold">Cybersécurité</span>
      </div>
    </div>

    <!-- BACK LINK -->
    <a
      href="/"
      class="backbtn fixed right-6 top-5 z-50 inline-flex items-center px-4 py-2 rounded-lg shadow-lg backdrop-blur transition-all"
      style="background: rgba(18,18,18,0.85); border: 1px solid rgba(255,255,255,0.10); color: rgba(255,255,255,0.90);"
    >
      ← Retour à la page Services TI
    </a>

    <!-- BAND (white like index) -->
    <section class="relative w-full overflow-hidden" style="background: var(--band);">
      <!-- gold line + fade (index vibe) -->
      <div class="h-[2px] w-full" style="background: var(--accent);"></div>
      <div
        class="h-14 w-full"
        style="background: linear-gradient(to bottom, color-mix(in srgb, var(--accent) 18%, transparent), transparent);"
      ></div>

      <!-- OFFERS -->
      <div class="relative mx-auto max-w-6xl px-4 pt-0 pb-8 space-y-12">
        <section>
          <h3 class="text-3xl font-semibold band-h">Offres</h3>
          <p class="mt-2 text-lg band-p">
            Des interventions concrètes et faciles à comprendre — sans jargon inutile, avec des résultats rapides.
          </p>

          <div class="mt-8 grid md:grid-cols-3 gap-6 items-stretch">
            {offers.map((o) => (
              <div class="card card-anim group relative overflow-hidden rounded-2xl p-7">
                <div class="pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-300 group-hover:opacity-100 hover-tint"></div>

                <div class="relative">
                  <h4 class="text-lg font-semibold" style="color: rgba(255,255,255,0.95);">
                    <span style="color: var(--accent);">{o.title}</span>
                  </h4>

                  <p class="mt-3 soft leading-relaxed">{o.desc}</p>

                  <ul class="bullet mt-5 list-disc ml-5 space-y-2 text-sm">
                    {o.bullets.map((b) => <li>{b}</li>)}
                  </ul>
                </div>
              </div>
            ))}
          </div>
        </section>

        <!-- FORMATS -->
        <section>
          <h3 class="text-3xl font-semibold band-h">Formats</h3>
          <p class="mt-2 text-lg band-p">Choisissez le format selon votre réalité (temps, équipe, objectifs).</p>

          <div class="mt-8 grid md:grid-cols-4 gap-6 items-stretch">
            {formats.map((f) => (
              <div class="card card-anim group relative overflow-hidden rounded-2xl p-6">
                <div class="pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-300 group-hover:opacity-100 hover-tint"></div>

                <div class="relative">
                  <h4 class="text-base font-semibold" style="color: rgba(255,255,255,0.95);">
                    {f.title}
                  </h4>
                  <p class="mt-3 text-sm soft leading-relaxed">{f.desc}</p>
                </div>
              </div>
            ))}
          </div>
        </section>

        <!-- CTA -->
        <section class="pb-10">
          <div class="card group relative overflow-hidden rounded-2xl p-7">
            <div class="pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-300 group-hover:opacity-100 hover-tint"></div>

            <div class="relative flex flex-col md:flex-row md:items-center md:justify-between gap-4">
              <div>
                <h4 class="text-xl font-semibold" style="color: rgba(255,255,255,0.95);">
                  Besoin d’un parcours d’intégration “clé en main” ?
                </h4>
                <p class="mt-2 soft">
                  On peut bâtir un plan simple (1–2 semaines) + mini guides internes, adapté à vos outils et à votre structure Teams/SharePoint.
                </p>
              </div>

              <a
                href="/survey"
                class="inline-flex items-center justify-center rounded-xl px-6 py-3 font-semibold transition hover:brightness-110"
                style={`background: linear-gradient(90deg,
                  color-mix(in srgb, var(--accent) 92%, white 8%),
                  color-mix(in srgb, var(--accent) 72%, black 28%)
                ); color:#111;`}
              >
                Demander une soumission →
              </a>
            </div>
          </div>
        </section>
      </div>
    </section>
  </div>
</SiteLayout>
